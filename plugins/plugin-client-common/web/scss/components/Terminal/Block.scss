/*
 * Copyright 2020 IBM Corporation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import '_mixins';

.repl-output {
  padding-right: calc(1rem - 6px);
}

/** Coloring the context border by status of the block */
@include Scrollback {
  .repl-block:not([data-is-output-only]) {
    position: relative;

    &:before {
      background-color: var(--color-table-border2);
      border-left: none;
      border-right: none;
      border-radius: 1px;
      opacity: 0.375;
      content: '';
      left: 0;
      position: absolute;
      top: 0.1875rem;
      bottom: 0.1875rem;
      width: 4px;
    }
    &[data-is-focused]:before {
      opacity: 1;
      background-color: var(--color-brand-01);
    }
    &.error:before {
      opacity: 1;
      background-color: var(--color-error);
    }
    &[data-is-focused] .repl-context {
      opacity: 1;
    }
    &:hover .repl-output .repl-context:after {
      border-color: var(--color-base03);
    }
  }

  .repl-block {
    .repl-output {
      margin-top: 0.5rem;
    }
    .repl-input,
    .repl-output {
      padding-left: 1rem;
    }
    .repl-context {
      color: var(--color-text-02);
      display: flex;
      justify-content: flex-end;
      flex-basis: 3rem;
      text-align: end;
      margin-right: 0.5rem;
      position: relative;
      opacity: 0.75;
    }

    .repl-input .repl-context:before {
      left: -1rem !important;
    }

    .repl-input {
      .repl-context,
      .repl-prompt-right-elements {
        padding-top: 0.25rem;
      }

      .repl-input-element-wrapper {
        padding: 0.25rem 0.5rem;
        border: 1px solid transparent;
      }
    }
    &:not(.repl-active) {
      .repl-input-element-wrapper {
        background-color: rgba(100, 100, 100, 0.1);
        border-color: rgba(100, 100, 100, 0.05);
      }
    }
    .repl-output .repl-context {
      opacity: 0;
    }

    &[data-is-output-only] .repl-result .kui--card {
      padding: 0;
      background: none;
      box-shadow: none;
      .kui--card-body {
        padding: 0;
      }
    }
  }
  .kui--repl-block-right-element {
    color: var(--color-text-02);
    font-size: 0.625rem;
  }
}
